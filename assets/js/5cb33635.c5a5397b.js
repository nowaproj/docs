"use strict";(self.webpackChunknowa_docs=self.webpackChunknowa_docs||[]).push([[9765],{5168:(e,i,n)=>{n.r(i),n.d(i,{assets:()=>o,contentTitle:()=>d,default:()=>h,frontMatter:()=>l,metadata:()=>s,toc:()=>c});const s=JSON.parse('{"id":"logic/common_functionalities/media_picker","title":"Media Picker","description":"How to build media picker functionality","source":"@site/docs/logic/common_functionalities/media_picker.md","sourceDirName":"logic/common_functionalities","slug":"/logic/common_functionalities/media_picker","permalink":"/logic/common_functionalities/media_picker","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":2,"frontMatter":{"sidebar_position":2,"title":"Media Picker","description":"How to build media picker functionality"},"sidebar":"tutorialSidebar","previous":{"title":"Navigation","permalink":"/logic/common_functionalities/navigation"},"next":{"title":"Print","permalink":"/logic/common_functionalities/printing"}}');var t=n(4848),r=n(8453);const l={sidebar_position:2,title:"Media Picker",description:"How to build media picker functionality"},d="Using the Media Picker",o={},c=[{value:"\ud83d\udcf8 Step-by-Step: Pick an Image and Display It",id:"-step-by-step-pick-an-image-and-display-it",level:2},{value:"1. Add an Image Widget",id:"1-add-an-image-widget",level:3},{value:"2. Add a Button to Trigger the Media Picker",id:"2-add-a-button-to-trigger-the-media-picker",level:3},{value:"Configure the Media Picker:",id:"configure-the-media-picker",level:4},{value:"3. Extract the Image File from the XFile List",id:"3-extract-the-image-file-from-the-xfile-list",level:3},{value:"4. Store the Bytes and Update the Image",id:"4-store-the-bytes-and-update-the-image",level:3},{value:"5. Refresh the Screen",id:"5-refresh-the-screen",level:3},{value:"6. Test It!",id:"6-test-it",level:3},{value:"\u2705 Recap",id:"-recap",level:2}];function a(e){const i={admonition:"admonition",blockquote:"blockquote",br:"br",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",hr:"hr",li:"li",mdxAdmonitionTitle:"mdxAdmonitionTitle",p:"p",strong:"strong",ul:"ul",...(0,r.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(i.header,{children:(0,t.jsx)(i.h1,{id:"using-the-media-picker",children:"Using the Media Picker"})}),"\n",(0,t.jsxs)(i.p,{children:["In this guide, you\u2019ll learn how to use the ",(0,t.jsx)(i.strong,{children:"Media Picker"})," in Nowa to let users pick an ",(0,t.jsx)(i.strong,{children:"image or video"})," and upload it into your app."]}),"\n",(0,t.jsxs)(i.p,{children:["We\u2019ll walk through a simple example where the user selects an ",(0,t.jsx)(i.strong,{children:"image"}),", and it\u2019s ",(0,t.jsx)(i.strong,{children:"instantly displayed"})," in the app."]}),"\n",(0,t.jsx)(i.hr,{}),"\n",(0,t.jsx)(i.h2,{id:"-step-by-step-pick-an-image-and-display-it",children:"\ud83d\udcf8 Step-by-Step: Pick an Image and Display It"}),"\n",(0,t.jsx)(i.h3,{id:"1-add-an-image-widget",children:"1. Add an Image Widget"}),"\n",(0,t.jsxs)(i.ul,{children:["\n",(0,t.jsxs)(i.li,{children:["Drag and drop an ",(0,t.jsx)(i.strong,{children:"Image"})," widget onto your screen."]}),"\n",(0,t.jsxs)(i.li,{children:["In the properties panel, set the ",(0,t.jsx)(i.strong,{children:"Source"})," to ",(0,t.jsx)(i.code,{children:"bytes"}),"."]}),"\n",(0,t.jsxs)(i.li,{children:["You\u2019ll see a ",(0,t.jsx)(i.code,{children:"Bytes"})," field. Click ",(0,t.jsx)(i.strong,{children:"Create Variable"}),"."]}),"\n",(0,t.jsxs)(i.li,{children:["This creates a variable that stores the image in ",(0,t.jsx)(i.strong,{children:"bytes format"}),"."]}),"\n"]}),"\n",(0,t.jsxs)("video",{controls:!0,width:"720",children:[(0,t.jsx)("source",{src:"/img/circuit/common_functionalities/media_picker/set_image_bytes.mp4",type:"video/mp4"}),(0,t.jsx)(i.p,{children:"Your browser does not support the video tag."})]}),"\n",(0,t.jsxs)(i.admonition,{type:"info",children:[(0,t.jsxs)(i.mdxAdmonitionTitle,{children:["The variable type will be ",(0,t.jsx)(i.code,{children:"Uint8List"})]}),(0,t.jsxs)(i.p,{children:[(0,t.jsx)(i.strong,{children:"What does that mean?"}),(0,t.jsx)(i.br,{}),"\n",(0,t.jsx)(i.code,{children:"Uint8List"})," stands for ",(0,t.jsx)(i.em,{children:"Unsigned Integer 8-bit List"}),", which is just a way of storing raw binary data like images."]})]}),"\n",(0,t.jsx)(i.hr,{}),"\n",(0,t.jsx)(i.h3,{id:"2-add-a-button-to-trigger-the-media-picker",children:"2. Add a Button to Trigger the Media Picker"}),"\n",(0,t.jsxs)(i.ul,{children:["\n",(0,t.jsxs)(i.li,{children:["Drop a ",(0,t.jsx)(i.strong,{children:"Button"}),' widget and open the logic of "OnPressed" in circuit.']}),"\n",(0,t.jsxs)(i.li,{children:["Add the ",(0,t.jsx)(i.strong,{children:"Show Media Picker"}),' node from "nowa" category']}),"\n"]}),"\n",(0,t.jsx)(i.h4,{id:"configure-the-media-picker",children:"Configure the Media Picker:"}),"\n",(0,t.jsxs)(i.ul,{children:["\n",(0,t.jsxs)(i.li,{children:[(0,t.jsx)(i.strong,{children:"Allow multiple selection"}),": Toggle ON or OFF depending on your use case."]}),"\n",(0,t.jsxs)(i.li,{children:[(0,t.jsx)(i.strong,{children:"Media type"}),": Choose ",(0,t.jsx)(i.code,{children:"image"}),", ",(0,t.jsx)(i.code,{children:"video"}),", or ",(0,t.jsx)(i.code,{children:"both"}),"."]}),"\n",(0,t.jsxs)(i.li,{children:[(0,t.jsx)(i.strong,{children:"Source type"}),": Choose ",(0,t.jsx)(i.code,{children:"gallery"}),", ",(0,t.jsx)(i.code,{children:"camera"}),", or ",(0,t.jsx)(i.code,{children:"both"}),"."]}),"\n",(0,t.jsxs)(i.li,{children:[(0,t.jsx)(i.strong,{children:"Preferred camera"})," (if source includes camera): Pick ",(0,t.jsx)(i.code,{children:"rear"})," or ",(0,t.jsx)(i.code,{children:"front"}),"."]}),"\n"]}),"\n",(0,t.jsxs)(i.blockquote,{children:["\n",(0,t.jsxs)(i.p,{children:["The media picker needs permissions to access the gallery or camera.",(0,t.jsx)(i.br,{}),"\n","When prompted, click ",(0,t.jsx)(i.strong,{children:"Hot fix"})," to auto-add all required dependencies."]}),"\n"]}),"\n",(0,t.jsxs)(i.ul,{children:["\n",(0,t.jsxs)(i.li,{children:["Toggle ",(0,t.jsx)(i.strong,{children:"Await"})," so the flow waits until the user finishes selecting a file."]}),"\n",(0,t.jsxs)(i.li,{children:["Enable ",(0,t.jsx)(i.strong,{children:"Store result"})," and choose ",(0,t.jsx)(i.strong,{children:"New variable"}),"."]}),"\n"]}),"\n",(0,t.jsxs)(i.p,{children:["Let\u2019s name this variable ",(0,t.jsx)(i.code,{children:"var1"}),"."]}),"\n",(0,t.jsxs)(i.blockquote,{children:["\n",(0,t.jsxs)(i.p,{children:["The result will be stored as a ",(0,t.jsxs)(i.strong,{children:["list of type ",(0,t.jsx)(i.code,{children:"XFile"})]}),".",(0,t.jsx)(i.br,{}),"\n",(0,t.jsxs)(i.strong,{children:["What is ",(0,t.jsx)(i.code,{children:"XFile"}),"?"]}),(0,t.jsx)(i.br,{}),"\n",(0,t.jsx)(i.code,{children:"XFile"})," is a cross-platform file representation from the ",(0,t.jsx)(i.code,{children:"image_picker"})," package. It contains metadata like path, name, and functions like ",(0,t.jsx)(i.code,{children:"readAsBytes()"})," to read the file\u2019s data."]}),"\n"]}),"\n",(0,t.jsx)(i.p,{children:"This video shows the enire steps of building the logic"}),"\n",(0,t.jsxs)("video",{controls:!0,width:"720",children:[(0,t.jsx)("source",{src:"/img/circuit/common_functionalities/media_picker/build_logic.mp4",type:"video/mp4"}),(0,t.jsx)(i.p,{children:"Your browser does not support the video tag."})]}),"\n",(0,t.jsx)(i.hr,{}),"\n",(0,t.jsx)(i.h3,{id:"3-extract-the-image-file-from-the-xfile-list",children:"3. Extract the Image File from the XFile List"}),"\n",(0,t.jsx)(i.p,{children:"Even when selecting one image, the result is still a list. So now:"}),"\n",(0,t.jsxs)(i.ul,{children:["\n",(0,t.jsxs)(i.li,{children:["Click the ",(0,t.jsx)(i.code,{children:"+"})," button to add a new ",(0,t.jsx)(i.strong,{children:"expression node"}),"."]}),"\n",(0,t.jsxs)(i.li,{children:["Go to ",(0,t.jsx)(i.strong,{children:"Locals"}),", pick ",(0,t.jsx)(i.code,{children:"var1"})," (the variable that holds the result of the picker)."]}),"\n",(0,t.jsxs)(i.li,{children:["On the right side, click ",(0,t.jsx)(i.code,{children:"+"})," to build an expression:","\n",(0,t.jsxs)(i.ul,{children:["\n",(0,t.jsxs)(i.li,{children:["Select ",(0,t.jsx)(i.strong,{children:"first"})," \u2192 this gets the first file in the list."]}),"\n",(0,t.jsxs)(i.li,{children:["Then click ",(0,t.jsx)(i.code,{children:"+"})," again to call ",(0,t.jsx)(i.strong,{children:"readAsBytes()"})," on the file."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(i.blockquote,{children:["\n",(0,t.jsxs)(i.p,{children:["The expression should now look like:",(0,t.jsx)(i.br,{}),"\n",(0,t.jsx)(i.code,{children:"var1.first.readAsBytes()"})]}),"\n"]}),"\n",(0,t.jsx)(i.hr,{}),"\n",(0,t.jsx)(i.h3,{id:"4-store-the-bytes-and-update-the-image",children:"4. Store the Bytes and Update the Image"}),"\n",(0,t.jsxs)(i.ul,{children:["\n",(0,t.jsxs)(i.li,{children:["Choose ",(0,t.jsx)(i.strong,{children:"Store result"}),", and create a new variable (we named it ",(0,t.jsx)(i.code,{children:"imageBytes"}),")."]}),"\n",(0,t.jsxs)(i.li,{children:["This variable is of type ",(0,t.jsx)(i.code,{children:"Uint8List"}),", which is exactly what your Image widget needs."]}),"\n"]}),"\n",(0,t.jsxs)(i.p,{children:["Now, go back to the image variable you created earlier (we called it ",(0,t.jsx)(i.code,{children:"image"})," in the video):"]}),"\n",(0,t.jsxs)(i.ul,{children:["\n",(0,t.jsxs)(i.li,{children:["Set it equal to ",(0,t.jsx)(i.code,{children:"imageBytes"}),"."]}),"\n"]}),"\n",(0,t.jsx)(i.p,{children:"This connects the picked image data to the UI."}),"\n",(0,t.jsx)(i.hr,{}),"\n",(0,t.jsx)(i.h3,{id:"5-refresh-the-screen",children:"5. Refresh the Screen"}),"\n",(0,t.jsxs)(i.ul,{children:["\n",(0,t.jsxs)(i.li,{children:["Add a ",(0,t.jsx)(i.strong,{children:"Refresh"})," node after updating the variable to make sure the UI updates and displays the new image."]}),"\n"]}),"\n",(0,t.jsx)(i.hr,{}),"\n",(0,t.jsx)(i.h3,{id:"6-test-it",children:"6. Test It!"}),"\n",(0,t.jsxs)(i.ul,{children:["\n",(0,t.jsxs)(i.li,{children:["Select the screen and hit ",(0,t.jsx)(i.strong,{children:"Play"}),"."]}),"\n",(0,t.jsx)(i.li,{children:"Try picking an image."}),"\n",(0,t.jsx)(i.li,{children:"The image should instantly appear inside the Image widget \ud83c\udf89"}),"\n"]}),"\n",(0,t.jsxs)("video",{controls:!0,width:"720",children:[(0,t.jsx)("source",{src:"/img/circuit/common_functionalities/media_picker/final_result.mp4",type:"video/mp4"}),(0,t.jsx)(i.p,{children:"Your browser does not support the video tag."})]}),"\n",(0,t.jsx)(i.hr,{}),"\n",(0,t.jsx)(i.h2,{id:"-recap",children:"\u2705 Recap"}),"\n",(0,t.jsx)(i.p,{children:"Here\u2019s a summary of what we did:"}),"\n",(0,t.jsxs)(i.ul,{children:["\n",(0,t.jsxs)(i.li,{children:["Used the ",(0,t.jsx)(i.strong,{children:"Media Picker"})," to let the user pick a file."]}),"\n",(0,t.jsxs)(i.li,{children:["Retrieved the ",(0,t.jsx)(i.strong,{children:"first item"})," from the result list (",(0,t.jsx)(i.code,{children:"XFile"}),")."]}),"\n",(0,t.jsxs)(i.li,{children:["Used ",(0,t.jsx)(i.strong,{children:(0,t.jsx)(i.code,{children:"readAsBytes()"})})," to convert it to displayable format."]}),"\n",(0,t.jsxs)(i.li,{children:["Stored the result in a ",(0,t.jsx)(i.code,{children:"Uint8List"})," variable."]}),"\n",(0,t.jsx)(i.li,{children:"Connected it to the Image widget."}),"\n",(0,t.jsxs)(i.li,{children:["Called ",(0,t.jsx)(i.strong,{children:"Refresh"})," to show the image."]}),"\n"]}),"\n",(0,t.jsx)(i.p,{children:"You can extend the same flow for videos or multi-file selection as well!"}),"\n",(0,t.jsx)(i.p,{children:"Let us know what you build with it \ud83d\udc47"})]})}function h(e={}){const{wrapper:i}={...(0,r.R)(),...e.components};return i?(0,t.jsx)(i,{...e,children:(0,t.jsx)(a,{...e})}):a(e)}},8453:(e,i,n)=>{n.d(i,{R:()=>l,x:()=>d});var s=n(6540);const t={},r=s.createContext(t);function l(e){const i=s.useContext(r);return s.useMemo((function(){return"function"==typeof e?e(i):{...i,...e}}),[i,e])}function d(e){let i;return i=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:l(e.components),s.createElement(r.Provider,{value:i},e.children)}}}]);