"use strict";(self.webpackChunknowa_docs=self.webpackChunknowa_docs||[]).push([[2251],{258:(e,s,n)=>{n.d(s,{A:()=>t});const t=n.p+"assets/images/queries-6654984fb448e99ac68d84a47e9ca6e1.png"},3594:(e,s,n)=>{n.r(s),n.d(s,{assets:()=>d,contentTitle:()=>o,default:()=>c,frontMatter:()=>i,metadata:()=>t,toc:()=>l});const t=JSON.parse('{"id":"data-connections/supabase/db","title":"Queries","description":"In this guide, we\u2019ll walk through how to set up your database and configure Row Level Security.","source":"@site/docs/data-connections/supabase/db.md","sourceDirName":"data-connections/supabase","slug":"/data-connections/supabase/db","permalink":"/data-connections/supabase/db","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":3,"frontMatter":{"sidebar_position":3},"sidebar":"tutorialSidebar","previous":{"title":"Authentication","permalink":"/data-connections/supabase/auth"},"next":{"title":"Stream","permalink":"/data-connections/supabase/streams"}}');var r=n(4848),a=n(8453);const i={sidebar_position:3},o="Queries",d={},l=[{value:"What is Queries?",id:"what-is-queries",level:2},{value:"What is Row Level Security (RLS)?",id:"what-is-row-level-security-rls",level:2},{value:"Most Frequently Used Queries",id:"most-frequently-used-queries",level:2},{value:"SELECT \u2013 retrieve data",id:"select--retrieve-data",level:3},{value:"INSERT \u2013 add data",id:"insert--add-data",level:3},{value:"UPDATE \u2013 modify data",id:"update--modify-data",level:3},{value:"DELETE \u2013 remove data",id:"delete--remove-data",level:3},{value:"Step 1: Create the table &amp; security policies",id:"step-1-create-the-table--security-policies",level:2},{value:"Supabase AI:",id:"supabase-ai",level:4},{value:"Create table visually:",id:"create-table-visually",level:4},{value:"Step 2: Generate a query",id:"step-2-generate-a-query",level:2},{value:"Single query or multiple queries",id:"single-query-or-multiple-queries",level:3},{value:"Single query",id:"single-query",level:4},{value:"Multiple queries",id:"multiple-queries",level:4},{value:"Generated Queries",id:"generated-queries",level:3},{value:"Modify generated code",id:"modify-generated-code",level:3},{value:"Step 3: Test your query",id:"step-3-test-your-query",level:2},{value:"Examples:",id:"examples",level:3},{value:"Example 1: Add Task",id:"example-1-add-task",level:4},{value:"Example 2: Update task",id:"example-2-update-task",level:4}];function u(e){const s={admonition:"admonition",blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",hr:"hr",img:"img",p:"p",pre:"pre",strong:"strong",...(0,a.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(s.header,{children:(0,r.jsx)(s.h1,{id:"queries",children:"Queries"})}),"\n",(0,r.jsx)(s.p,{children:"In this guide, we\u2019ll walk through how to set up your database and configure Row Level Security."}),"\n",(0,r.jsx)(s.hr,{}),"\n",(0,r.jsx)(s.h2,{id:"what-is-queries",children:"What is Queries?"}),"\n",(0,r.jsx)(s.p,{children:"Queries are how you interact with your Supabase database to fetch or update information. They define what data you want and how it\u2019s made available in your app\u2019s frontend."}),"\n",(0,r.jsx)(s.hr,{}),"\n",(0,r.jsx)(s.h2,{id:"what-is-row-level-security-rls",children:"What is Row Level Security (RLS)?"}),"\n",(0,r.jsx)(s.p,{children:"RLS is used to enforce policies that determine who can view, add, edit, or delete records in a table."}),"\n",(0,r.jsx)(s.hr,{}),"\n",(0,r.jsx)(s.h2,{id:"most-frequently-used-queries",children:"Most Frequently Used Queries"}),"\n",(0,r.jsx)(s.h3,{id:"select--retrieve-data",children:"SELECT \u2013 retrieve data"}),"\n",(0,r.jsxs)(s.p,{children:["You can use ",(0,r.jsx)(s.strong,{children:"SELECT"})," when you want to ",(0,r.jsx)(s.strong,{children:"get information"})," from one or more tables."]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-sql",children:"-- You want to show all students in your class 10A\nSELECT id, name, class\nFROM students\nWHERE class = '10A';\n"})}),"\n",(0,r.jsx)(s.h3,{id:"insert--add-data",children:"INSERT \u2013 add data"}),"\n",(0,r.jsxs)(s.p,{children:["You can use ",(0,r.jsx)(s.strong,{children:"INSERT"})," when you need to ",(0,r.jsx)(s.strong,{children:"add new records"})," into your table."]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-sql",children:"-- You want to add a new student record\nINSERT INTO students (name, class, phone)\nVALUES ('Ada Lovelace', '10A', '555-0100');\n"})}),"\n",(0,r.jsx)(s.h3,{id:"update--modify-data",children:"UPDATE \u2013 modify data"}),"\n",(0,r.jsxs)(s.p,{children:["You can use ",(0,r.jsx)(s.strong,{children:"UPDATE"})," when you want to ",(0,r.jsx)(s.strong,{children:"change values"})," that are already in your table."]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-sql",children:"-- You want to fix a student\u2019s phone number\nUPDATE students\nSET phone = '555-0199'\nWHERE id = 42;\n"})}),"\n",(0,r.jsx)(s.h3,{id:"delete--remove-data",children:"DELETE \u2013 remove data"}),"\n",(0,r.jsxs)(s.p,{children:["You can use ",(0,r.jsx)(s.strong,{children:"DELETE"})," when you want to ",(0,r.jsx)(s.strong,{children:"remove rows"})," from your table."]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-sql",children:"-- You want to Delete a student once you no longer need their record\nDELETE FROM students\nWHERE id = 42;\n"})}),"\n",(0,r.jsx)(s.hr,{}),"\n",(0,r.jsx)(s.h2,{id:"step-1-create-the-table--security-policies",children:"Step 1: Create the table & security policies"}),"\n",(0,r.jsx)(s.p,{children:"If you need to create a table that will store todos."}),"\n",(0,r.jsx)(s.p,{children:"We created an example for you that builds a table with automatic IDs and timestamps, and sets up security so every user can only manage their own todos."}),"\n",(0,r.jsxs)(s.p,{children:["Open your ",(0,r.jsx)(s.strong,{children:"Supabase project"}),", then click on ",(0,r.jsx)(s.strong,{children:"SQL Editor"})," and paste this ",(0,r.jsx)(s.strong,{children:"SQL snippet"}),"."]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-sql",children:'CREATE TABLE todos (\n  id uuid DEFAULT gen_random_uuid() PRIMARY KEY,\n  created_at timestamptz DEFAULT now() NOT NULL,\n  user_id uuid REFERENCES auth.users(id) NOT NULL,\n  task text NOT NULL,\n  is_complete boolean DEFAULT false NOT NULL\n);\n\nALTER TABLE todos ENABLE ROW LEVEL SECURITY;\n\nCREATE POLICY "Users can view their own todos." ON todos\n  FOR SELECT USING (auth.uid() = user_id);\n\nCREATE POLICY "Users can create their own todos." ON todos\n  FOR INSERT WITH CHECK (auth.uid() = user_id);\n\nCREATE POLICY "Users can update their own todos." ON todos\n  FOR UPDATE USING (auth.uid() = user_id);\n\nCREATE POLICY "Users can delete their own todos." ON todos\n  FOR DELETE USING (auth.uid() = user_id);\n\n'})}),"\n",(0,r.jsxs)("video",{controls:!0,width:"850",children:[(0,r.jsx)("source",{src:"/videos/supabase/db/create.webm",type:"video/mp4"}),(0,r.jsx)(s.p,{children:"Your browser does not support the video tag."})]}),"\n",(0,r.jsx)(s.p,{children:"Other ways to do:"}),"\n",(0,r.jsx)(s.p,{children:"You don\u2019t always have to write SQL queries \u2014 you can also create tables visually or even let Supabase AI help you out!"}),"\n",(0,r.jsx)(s.h4,{id:"supabase-ai",children:"Supabase AI:"}),"\n",(0,r.jsxs)(s.p,{children:["Click ",(0,r.jsx)(s.strong,{children:"AI Assistant"}),", type what you want it to do, click ",(0,r.jsx)(s.strong,{children:"Run Query"})," then ",(0,r.jsx)(s.strong,{children:"Run"}),", and go to the ",(0,r.jsx)(s.strong,{children:"Table Editor"})," to check the results."]}),"\n",(0,r.jsxs)("video",{controls:!0,width:"850",children:[(0,r.jsx)("source",{src:"/videos/supabase/db/supabaseai.webm",type:"video/mp4"}),(0,r.jsx)(s.p,{children:"Your browser does not support the video tag."})]}),"\n",(0,r.jsx)(s.h4,{id:"create-table-visually",children:"Create table visually:"}),"\n",(0,r.jsxs)(s.p,{children:["Open the ",(0,r.jsx)(s.strong,{children:"Table Editor"}),", click ",(0,r.jsx)(s.strong,{children:"New Table"}),", enter a name, adjust the required settings, and click ",(0,r.jsx)(s.strong,{children:"Save"}),"."]}),"\n",(0,r.jsxs)("video",{controls:!0,width:"850",children:[(0,r.jsx)("source",{src:"/videos/supabase/db/visual.webm",type:"video/mp4"}),(0,r.jsx)(s.p,{children:"Your browser does not support the video tag."})]}),"\n",(0,r.jsx)(s.hr,{}),"\n",(0,r.jsx)(s.h2,{id:"step-2-generate-a-query",children:"Step 2: Generate a query"}),"\n",(0,r.jsx)(s.p,{children:"We built Nowa AI to understand your database structure, so you don\u2019t need to write SQL queries or remember column names, just use plain English, and Nowa will handle it for you."}),"\n",(0,r.jsxs)(s.p,{children:["Click the ",(0,r.jsx)(s.strong,{children:"+"})," icon, enter ",(0,r.jsx)(s.strong,{children:"your prompt"}),", then click ",(0,r.jsx)(s.strong,{children:"Generate"}),"."]}),"\n",(0,r.jsx)(s.h3,{id:"single-query-or-multiple-queries",children:"Single query or multiple queries"}),"\n",(0,r.jsx)(s.p,{children:"You can choose whether to generate a single query or multiple queries at the same time."}),"\n",(0,r.jsx)(s.h4,{id:"single-query",children:"Single query"}),"\n",(0,r.jsx)(s.p,{children:"You can generate single query at same time."}),"\n",(0,r.jsx)(s.p,{children:(0,r.jsx)(s.strong,{children:"Example prompt:"})}),"\n",(0,r.jsxs)(s.blockquote,{children:["\n",(0,r.jsx)(s.p,{children:"\u201cGenerate a query to add a task for a user.\u201d"}),"\n"]}),"\n",(0,r.jsxs)("video",{controls:!0,width:"850",children:[(0,r.jsx)("source",{src:"/videos/supabase/db/ai.webm",type:"video/mp4"}),(0,r.jsx)(s.p,{children:"Your browser does not support the video tag."})]}),"\n",(0,r.jsx)(s.h4,{id:"multiple-queries",children:"Multiple queries"}),"\n",(0,r.jsx)(s.p,{children:"You can generate multiple queries at same time."}),"\n",(0,r.jsx)(s.p,{children:(0,r.jsx)(s.strong,{children:"Example prompt:"})}),"\n",(0,r.jsxs)(s.blockquote,{children:["\n",(0,r.jsx)(s.p,{children:"\u201cCreate queries for updating a task, marking it as done, and deleting.\u201d"}),"\n"]}),"\n",(0,r.jsxs)("video",{controls:!0,width:"850",children:[(0,r.jsx)("source",{src:"/videos/supabase/db/multiquery.webm",type:"video/mp4"}),(0,r.jsx)(s.p,{children:"Your browser does not support the video tag."})]}),"\n",(0,r.jsx)(s.h3,{id:"generated-queries",children:"Generated Queries"}),"\n",(0,r.jsx)(s.p,{children:"You can see an icon next to the query name that shows the type of query"}),"\n",(0,r.jsx)(s.p,{children:(0,r.jsx)(s.img,{src:n(258).A+"",width:"1921",height:"852"})}),"\n",(0,r.jsx)(s.h3,{id:"modify-generated-code",children:"Modify generated code"}),"\n",(0,r.jsx)(s.p,{children:"Nowa also gives you control to fine-tune your queries."}),"\n",(0,r.jsxs)(s.p,{children:["You can ",(0,r.jsx)(s.strong,{children:"manually edit the code"}),", or you can ",(0,r.jsx)(s.strong,{children:"ask AI to modify it for you"})," if you want."]}),"\n",(0,r.jsx)(s.p,{children:(0,r.jsx)(s.img,{src:n(7443).A+"",width:"3160",height:"1828"})}),"\n",(0,r.jsx)(s.hr,{}),"\n",(0,r.jsx)(s.h2,{id:"step-3-test-your-query",children:"Step 3: Test your query"}),"\n",(0,r.jsx)(s.p,{children:"You can try out your query."}),"\n",(0,r.jsxs)(s.p,{children:["Click on your generated query, add a value to the required field, and then click on the ",(0,r.jsx)(s.strong,{children:"Play"})," button."]}),"\n",(0,r.jsx)(s.admonition,{title:"Important",type:"warning",children:(0,r.jsxs)(s.p,{children:["You need to be ",(0,r.jsx)(s.strong,{children:"signed in"})," to run queries (because RLS checks your identity)."]})}),"\n",(0,r.jsxs)(s.p,{children:["Check your ",(0,r.jsx)(s.strong,{children:"Supabase table"})," to see the changes in the ",(0,r.jsx)(s.strong,{children:"Table editor"}),"."]}),"\n",(0,r.jsx)(s.h3,{id:"examples",children:"Examples:"}),"\n",(0,r.jsx)(s.p,{children:"These examples help you understand how to run a query."}),"\n",(0,r.jsx)(s.h4,{id:"example-1-add-task",children:"Example 1: Add Task"}),"\n",(0,r.jsx)(s.p,{children:"You can add a task, here\u2019s how:"}),"\n",(0,r.jsxs)(s.p,{children:["Click on ",(0,r.jsx)(s.strong,{children:"addTask"}),", enter ",(0,r.jsx)(s.strong,{children:"'Buy milk'"})," in the task field, and then click the ",(0,r.jsx)(s.strong,{children:"Play"})," button."]}),"\n",(0,r.jsxs)("video",{controls:!0,width:"850",children:[(0,r.jsx)("source",{src:"/videos/supabase/db/addtask.webm",type:"video/mp4"}),(0,r.jsx)(s.p,{children:"Your browser does not support the video tag."})]}),"\n",(0,r.jsx)(s.h4,{id:"example-2-update-task",children:"Example 2: Update task"}),"\n",(0,r.jsx)(s.p,{children:"You can change a task, here\u2019s how:"}),"\n",(0,r.jsxs)(s.p,{children:["Click on the ",(0,r.jsx)(s.strong,{children:"updateTask"})," query, copy the ",(0,r.jsx)(s.code,{children:"taskID"})," from the ",(0,r.jsx)(s.strong,{children:"Supabase table"}),", add the new task, and then click the ",(0,r.jsx)(s.strong,{children:"Play"})," button."]}),"\n",(0,r.jsxs)("video",{controls:!0,width:"850",children:[(0,r.jsx)("source",{src:"/videos/supabase/db/updatequery.webm",type:"video/mp4"}),(0,r.jsx)(s.p,{children:"Your browser does not support the video tag."})]}),"\n",(0,r.jsx)(s.hr,{})]})}function c(e={}){const{wrapper:s}={...(0,a.R)(),...e.components};return s?(0,r.jsx)(s,{...e,children:(0,r.jsx)(u,{...e})}):u(e)}},7443:(e,s,n)=>{n.d(s,{A:()=>t});const t=n.p+"assets/images/editcode-a3204bde0d3c222f3ce225b39da9ae4c.png"},8453:(e,s,n)=>{n.d(s,{R:()=>i,x:()=>o});var t=n(6540);const r={},a=t.createContext(r);function i(e){const s=t.useContext(a);return t.useMemo((function(){return"function"==typeof e?e(s):{...s,...e}}),[s,e])}function o(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:i(e.components),t.createElement(a.Provider,{value:s},e.children)}}}]);